<div class="background-module slideshow" ng-controller="SlideshowController">
    <div class="slideshow-images">
        <div class="slideshow-image"
             ng-class="{ active: currentImages[0].active }"
             ng-style="{ 'background-size': module.settings.mode, 'background-image': 'url(' + currentImages[0].src + ')', 'z-index': currentImages[0].order }"></div>
        <div class="slideshow-image"
             ng-class="{ active: currentImages[1].active }"
             ng-style="{ 'background-size': module.settings.mode, 'background-image': 'url(' + currentImages[1].src + ')', 'z-index': currentImages[1].order }"></div>
        <div class="slideshow-images-cover" ng-click="imageClick()"></div>
        <div class="loading-indicator" ng-class="{active: slideshowImageLoading && background.enabled }"></div>
    </div>
    <div class="slideshow-menu" ng-class="{ open: slideshowMenuOpen }">
        <header class="slideshow-menu-header" ng-click="toggleMenu()">
            <div class="slideshow-menu-header-controls"></div>
            <h2>Slideshow</h2>
        </header>
        <div class="slideshow-menu-contents">
            <menu class="slideshow-menu-sources">
                <a ng-repeat="source in sources"
                   ng-click="selectSource(source)"
                   ng-class="{ selected: currentSource == source}">{{source.name}}</a>
            </menu>
            <div class="slideshow-source-contents" ng-show="currentSource" ng-switch="contentsType">
                <div class="slideshow-source-header">
                    <div class="slideshow-menu-header-controls">
                        <a ng-click="sourceLogin(currentSource)" ng-show="!currentSourceIsLoggedIn"><i class="icon-signin"></i> Login to {{currentSource.name}}</a>
                        <a ng-click="sourceLogout()" ng-show="currentSourceIsLoggedIn"><i class="icon-signout"></i> Logout from {{currentSource.name}}</a>
                    </div>

                    <h3>{{currentSource.name}}</h3>
                    <span ng-show="currentFeed.type == 'album'">
                        <i class="icon-caret-right"></i>
                        <a ng-click="getAlbumsForCurrentSource()">Albums</a>
                    </span>
                    <i class="icon-caret-right"></i>
                    {{currentFeed.name}}
                </div>
                <div class="slideshow-thumbnails" ng-switch-when="albums">
                    <a ng-repeat="item in currentSourceItems"
                       ng-click="selectFeed(item)"
                       title="{{item.name}} ({{item.imageCount}})"
                       class="thumbnail-img"
                       ng-class="{ selected: currentFeed == item }"
                        ng-style="{ 'background-image': 'url(' + item.thumbnail.src + ')' }">
                    </a>
                </div>
                <div class="slideshow-thumbnails" ng-switch-when="album">
                    <a ng-repeat="image in currentFeedImages"
                       ng-click="selectImage(image)"
                       title="{{image.title}}"
                       class="thumbnail-img"
                       ng-class="{ selected: currentImage == image }"
                       ng-style="{ 'background-image': 'url(' + image.thumbnail.src + ')' }">
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>